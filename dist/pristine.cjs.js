var q=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var B=Object.prototype.hasOwnProperty;var Z=(s,a)=>{for(var o in a)q(s,o,{get:a[o],enumerable:!0})},X=(s,a,o,t)=>{if(a&&typeof a=="object"||typeof a=="function")for(let g of j(a))!B.call(s,g)&&g!==o&&q(s,g,{get:()=>a[g],enumerable:!(t=H(a,g))||t.enumerable});return s};var W=s=>X(q({},"__esModule",{value:!0}),s);var Q={};Z(Q,{default:()=>L});module.exports=W(Q);var b={en:{required:"This field is required",email:"This field requires a valid email address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",filesize:"Maximum file size is ${1}",filesizetotal:"Maximum total file size ${1}",filetype:"Allowed file types: ${1.split(',').join(' ')}",pattern:"Please match the requested format",equals:"The two fields do not match",default:"Please enter a correct value"}};function $(s,a){for(;(s=s.parentElement)&&!s.classList.contains(a););return s}function T(s){return this.replace(/\${([^{}]*)}/g,(a,o)=>arguments[o])}function C(s){return s.pristine.self.form.querySelectorAll('input[name="'+s.getAttribute("name")+'"]:checked').length}function R(s,a){for(let o in a)o in s||(s[o]=a[o]);return s}var V={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help",disableSubmitUntilValid:!0,validateDefaultValues:!0,validationStrategy:"off"},S="pristine-error",J="input:not([type^=hidden]):not([type^=submit]), select, textarea",z=new Set(["required","min","max","minlength","maxlength","pattern"]),K=/^(([^<>()\[\]\\.,;:\s@']+(\.[^<>()\[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,F=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,y="en",N={},m=function(s,a){a.name=s,a.priority===void 0&&(a.priority=1),N[s]=a};m("text",{fn:()=>!0,priority:0});m("required",{fn:function(s){return this.type==="radio"||this.type==="checkbox"?C(this):this.type==="file"?this.files&&this.files.length>0:s!==void 0&&s.trim()!==""},priority:99,halt:!0});m("email",{fn:s=>!s||K.test(s)});m("number",{fn:s=>!s||!isNaN(parseFloat(s)),priority:2});m("integer",{fn:s=>!s||/^\d+$/.test(s)});m("minlength",{fn:(s,a)=>!s||s.length>=parseInt(a)});m("maxlength",{fn:(s,a)=>!s||s.length<=parseInt(a)});m("min",{fn:function(s,a){return!s||(this.type==="checkbox"?C(this)>=parseInt(a):parseFloat(s)>=parseFloat(a))}});m("max",{fn:function(s,a){return!s||(this.type==="checkbox"?C(this)<=parseInt(a):parseFloat(s)<=parseFloat(a))}});m("pattern",{fn:(s,a)=>{let o=a.match(new RegExp("^/(.*?)/([gimy]*)$"));return!s||new RegExp(o[1],o[2]).test(s)}});m("equals",{fn:(s,a)=>{let o=document.querySelector(a);return o&&(!s&&!o.value||o.value===s)}});m("filesize",{fn:function(s,a){return!this.files||this.files.length===0?!0:Array.from(this.files).every(o=>o.size<=parseInt(a))}});m("filesizetotal",{fn:function(s,a){return!this.files||this.files.length===0?!0:Array.from(this.files).reduce((o,t)=>o+t.size,0)<=parseInt(a)}});m("filetype",{fn:function(s,a){if(!this.files||this.files.length===0)return!0;let o=a.split(",").map(t=>t.trim().toLowerCase());return Array.from(this.files).every(t=>o.includes(t.type.toLowerCase()))}});var L=class{constructor(a,o){let t=this;g(a,o);async function g(e,n){if(e.setAttribute("novalidate","true"),t.destroyed=!1,t.form=e,t.config=R(n||{},V),t.fields=Array.from(e.querySelectorAll(J)).map(function(r){let i=[],u={},c={},d=new Set,f=!1;[].forEach.call(r.attributes,function(l){if(/^data-pristine-/.test(l.name)){let p=l.name.substr(14);z.has(p)?d.add(p):p==="type"&&d.add(l.value)}}),[].forEach.call(r.attributes,function(l){if(/^data-pristine-/.test(l.name)){let p=l.name.substr(14),x=p.match(F);if(x!==null){let _=x[1]===void 0?"en":x[1];c.hasOwnProperty(_)||(c[_]={});let G=p.replace(F,"");c[_][G]=l.value;return}p==="type"&&(p=l.value),w(i,u,p,l.value)}else z.has(l.name)&&!d.has(l.name)?w(i,u,l.name,l.value):l.name==="type"&&!d.has(l.value)&&w(i,u,l.value)}),i.sort((l,p)=>p.priority-l.priority),t.config.validationStrategy==="live"?v(r,~["radio","checkbox","select"].indexOf(r.getAttribute("type"))?"change":"input",async function(l){await t.validate(l.target)}.bind(t)):t.config.validationStrategy==="blur"?v(r,~["radio","checkbox","select"].indexOf(r.getAttribute("type"))?"change":"blur",async function(l){await t.validate(l.target)}.bind(t)):t.config.validationStrategy==="hybrid"&&(v(r,~["radio","checkbox","select"].indexOf(r.getAttribute("type"))?"change":"blur",async function(l){f=!0,await t.validate(l.target)}.bind(t),{once:!0}),v(r,~["radio","checkbox","select"].indexOf(r.getAttribute("type"))?"change":"input",async function(l){f&&await t.validate(l.target)}.bind(t))),t.config.validateDefaultValues&&queueMicrotask(async function(){let l=r.type==="checkbox"||r.type==="radio"?r.checked!==r.defaultChecked:r.value!==r.defaultValue,p=r.value.trim()==="",x=r.hasAttribute("required")||r.hasAttribute("data-pristine-required")!==null;(l||x&&!p)&&(f=!0,await t.validate(r))});let h={input:r,validators:i,params:u,messages:c,touched:f,self:t};return r.pristine=h}.bind(t)),t.submit=t.form.querySelector("button[type=submit], input[type=submit]"),t.config.disableSubmitUntilValid){let r=function(){clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(A.bind(t),50)};t.debounceTimeout=null,v(t.form,"input",r.bind(t)),v(t.form,"change",r.bind(t)),queueMicrotask(A)}v(t.form,"reset",I.bind(t))}async function A(){if(!t.submit)return;let e=!await t.validate(!0),n=!1;if(t.config.validateDefaultValues)for(let r of t.fields){let i=r.input;if(n=i.type==="checkbox"||i.type==="radio"?i.checked!==i.checked:i.value!==i.defaultValue,n)break}t.submit.disabled=e||t.config.validateDefaultValues&&!n}function w(e,n,r,i){let u=N[r];if(u&&(e.push(u),i)){let c=r==="pattern"?[i]:i.split(",");c.unshift(null),n[r]=c}}t.validate=async function(e,n){n=e&&n===!0||e===!0;let r=t.fields;e!==!0&&e!==!1&&(e instanceof HTMLElement?r=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(r=Array.from(e).map(u=>u.pristine)));let i=!0;for(let u=0;r[u];u++){let c=r[u];await P(c)?!n&&U(c):(i=!1,!n&&M(c))}return i},t.getErrors=function(e){if(!e){let n=[];for(let r=0;r<t.fields.length;r++){let i=t.fields[r];i.errors.length&&n.push({input:i.input,errors:i.errors})}return n}return e.tagName&&e.tagName.toLowerCase()==="select"?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors};async function P(e){let n=[],r=!0,i=[];e.input.hasAttribute("multiple")?(e.input.type="select")?i.push(Array.from(selectElem.selectedOptions).map(u=>u.value)):i.push(e.input.split(",")):i.push(e.input.value);for(let u=0;u<i.length;u++){let c=i[u];for(let d=0;e.validators[d];d++){let f=e.validators[d],h=e.params[f.name]?e.params[f.name]:[];if(h[0]=c,(f.fn.constructor.name==="AsyncFunction"?!await f.fn.apply(e.input,h):!f.fn.apply(e.input,h))&&(r=!1,typeof f.msg=="function"?n.push(f.msg(c,h)):typeof f.msg=="string"?n.push(T.apply(f.msg,h)):f.msg===Object(f.msg)&&f.msg[y]?n.push(T.apply(f.msg[y],h)):e.messages[y]&&e.messages[y][f.name]?n.push(T.apply(e.messages[y][f.name],h)):b[y]&&b[y][f.name]?n.push(T.apply(b[y][f.name],h)):n.push(T.apply(b[y].default,h)),f.halt===!0))break}if(!r)break}return e.errors=n,r}t.addValidator=function(e,n,r,i,u){e instanceof HTMLElement?(e.pristine.validators.push({fn:n,msg:r,priority:i,halt:u}),e.pristine.validators.sort((c,d)=>d.priority-c.priority)):console.warn("The parameter elem must be a dom element")};function k(e){if(e.errorElements)return e.errorElements;let n=$(e.input,t.config.classTo),r=null,i=null;return t.config.classTo===t.config.errorTextParent?r=n:r=n.querySelector("."+t.config.errorTextParent),r&&(i=r.querySelector("."+S),i||(i=document.createElement(t.config.errorTextTag),i.className=S+" "+t.config.errorTextClass,r.appendChild(i),i.pristineDisplay=i.style.display)),e.errorElements=[n,i]}function M(e){let n=k(e),r=n[0],i=n[1],{input:u}=e,d=`error-${u.id||Math.floor(new Date().valueOf()*Math.random())}`;if(r){let f=E(t.config.errorClass),h=E(t.config.successClass);h.length&&h.forEach(l=>r.classList.remove(l)),f.length&&f.forEach(l=>r.classList.add(l)),u.setAttribute("aria-describedby",d),u.setAttribute("aria-invalid","true")}i&&(i.setAttribute("id",d),i.setAttribute("role","alert"),i.innerHTML=e.errors.join("<br/>"),i.style.display=i.pristineDisplay||"")}t.addError=function(e,n){e=e.length?e[0]:e,e.pristine.errors.push(n),M(e.pristine)};function D(e){let n=k(e),r=n[0],i=n[1],{input:u}=e;if(r){let c=E(t.config.errorClass),d=E(t.config.successClass);c.length&&c.forEach(f=>r.classList.remove(f)),d.length&&d.forEach(f=>r.classList.remove(f)),u.removeAttribute("aria-describedby"),u.removeAttribute("aria-invalid")}return i&&(i.removeAttribute("id"),i.removeAttribute("role"),i.innerHTML="",i.style.display="none"),n}function U(e){let n=D(e)[0],r=E(t.config.successClass);r.length&&n&&r.forEach(i=>n.classList.add(i))}function v(e,n,r){e.addEventListener(n,r),e.__pristineListeners||(e.__pristineListeners=[]),e.__pristineListeners.push({event:n,handler:r})}function O(e){if(e.__pristineListeners){for(let{event:n,handler:r}of e.__pristineListeners)e.removeEventListener(n,r);e.__pristineListeners=[]}}async function I(){for(let e=0;t.fields[e];e++)t.fields[e].errorElements=null,t.fields[e].touched=!1;t.config.disableSubmitUntilValid&&await A.bind(t),Array.from(t.form.querySelectorAll("."+S)).map(function(e){e.parentNode.removeChild(e)}),Array.from(t.form.querySelectorAll("."+t.config.classTo)).map(function(e){let n=E(t.config.errorClass),r=E(t.config.successClass);n.length&&r.forEach(i=>e.classList.remove(i)),n.length&&n.forEach(i=>e.classList.remove(i))})}t.reset=I.bind(t);function E(e){let n=e.split(" ").filter(r=>r);return n.length?n:[]}return t.destroy=async function(){t.destroyed||(t.destroyed=!0,t.debounceTimeout&&(clearTimeout(t.debounceTimeout),t.debounceTimeout=null),await t.reset(),t.fields.forEach(function(e){O(e.input),delete e.input.pristine}),t.fields=[],O(t.form))},t.setGlobalConfig=function(e){V=e},t}static addValidator(a,o,t,g,A){m(a,{fn:o,msg:t,priority:g,halt:A})}static addMessages(a,o){let t=b.hasOwnProperty(a)?b[a]:b[a]={};Object.keys(o).forEach(function(g,A){t[g]=o[g]})}static setLocale(a){y=a}};
//# sourceMappingURL=pristine.cjs.js.map
